<html>
<head>
    <style>
        .valid {
            color: #009900;
        }
        .fail {
            color: #990000;
        }
    </style>
</head>

<body>
<fieldset>
    <legend>Color evaluation</legend>
    <label for="foreground">Foreground (hex)<input id="foreground" onchange="setColor(this.value, 'foreInput')" value="#000000"/></label>
    <input type="color" id="foreInput" onchange="setColor(this.value, 'foreground')" value="#000000"/><br/>
    <label for="background">Background (hex)<input id="background" onchange="setColor(this.value, 'backInput')" value="#FFFFFF"/></label>
    <input type="color" id="backInput" onchange="setColor(this.value, 'background')" value="#FFFFFF"/><br/>
    <button onclick="evaluateColors()">Evaluate</button>
    <table>
        <caption>Results</caption>
        <thead>
        <tr>
            <th>Color mode</th>
            <th>Foreground</th>
            <th>Backgroud</th>
            <th>Contrast</th>
            <th>Brightness</th>
            <th>Color diff</th>
        </tr>
        </thead>
        <tbdy>
            <tr>
                <th>hex</th>
                <td id="foreHex"></td>
                <td id="backHex"></td>
                <td class="contrast"></td>
                <td class="brightness"></td>
                <td class="colorDifference"></td>
            </tr>
            <tr>
                <th>rgb</th>
                <td id="foreRGB"></td>
                <td id="backRGB"></td>
                <td class="contrast"></td>
                <td class="brightness"></td>
                <td class="colorDifference"></td>
            </tr>
        </tbdy>
    </table>
    <table>
        <thead>
        <tr>
            <th>level</th>
            <th>Contrast ratio</th>
            <th>small</th>
            <th>large</th>
            <th>example</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>AA</td>
            <td class="contrast"></td>
            <td id="smallAA"></td>
            <td id="largeAA"></td>
            <td class="sampleText" style="font-size: 14pt">Lorem ipsum</td>
        </tr>
        <tr>
            <td>AAA</td>
            <td class="contrast"></td>
            <td id="smallAAA"></td>
            <td id="largeAAA"></td>
            <td class="sampleText" style="font-size: 18pt">Lorem ipsum</td>
        </tr>
        </tbody>
    </table>
</fieldset>
<script src="wcagContrastChecker.js"></script>
<script>
    evaluateColors();

    function setColor(color, id) {
        document.getElementById(id).value = color;
    }

    function evaluateColors() {
        var foregroundColor = document.getElementById('foreground').value,
            backgroundColor = document.getElementById('background').value,
            foreHex = document.getElementById('foreHex'),
            foreRGB = document.getElementById('foreRGB'),
            backHex = document.getElementById('backHex'),
            backRGB = document.getElementById('backRGB'),
            foreInput = document.getElementById('foreInput'),
            backInput = document.getElementById('backInput'),
            contrast = document.querySelectorAll('.contrast'),
            brightness = document.querySelectorAll('.brightness'),
            colorDifference = document.querySelectorAll('.colorDifference'),
            foreRGBObject = hexToRGB(foregroundColor),
            backRGBObject = hexToRGB(backgroundColor),
            examples = document.querySelectorAll('.sampleText'),
            contrastDiff = getContrastDiff(foreRGBObject, backRGBObject),
            brightnessDiff = getBrightnessDiff(foreRGBObject, backRGBObject),
            colorDiff = getColorDiff(foreRGBObject, backRGBObject),
            isValidNormalAA = contrastDiff >= 4.5,
            isValidNormalAAA = contrastDiff >= 3,
            isValidLargeAA = contrastDiff >= 7,
            isValidLargeAAA = contrastDiff >= 4.5;

        foreInput.value = shorthandHexToExtended(foregroundColor);
        backInput.value = shorthandHexToExtended(backgroundColor);

        foreHex.innerText = foregroundColor;
        foreRGB.innerText = 'rgb(' + foreRGBObject.r + ',' + foreRGBObject.g + ',' + foreRGBObject.b + ')';
        backHex.innerText = backgroundColor;
        backRGB.innerText = 'rgb(' + backRGBObject.r + ',' + backRGBObject.g + ',' + backRGBObject.b + ')';

        contrast.forEach(function (element) {
            element.innerText = contrastDiff + ':1';
        });
        brightness.forEach(function (element) {
            element.innerText = brightnessDiff;
        });
        colorDifference.forEach(function (element) {
            element.innerText = colorDiff;
        });
        examples.forEach(function (element) {
            element.style.backgroundColor = backgroundColor;
            element.style.color = foregroundColor;
        });

        document.getElementById('smallAA').className = isValidNormalAA ? 'valid' : 'fail';
        document.getElementById('smallAA').innerText = isValidNormalAA ? 'Pass' : 'Fail';
        document.getElementById('smallAAA').className = isValidNormalAAA ? 'valid' : 'fail';
        document.getElementById('smallAAA').innerText = isValidNormalAAA ? 'Pass' : 'Fail';
        document.getElementById('largeAA').className = isValidLargeAA ? 'valid' : 'fail';
        document.getElementById('largeAA').innerText = isValidLargeAA ? 'Pass' : 'Fail';
        document.getElementById('largeAAA').className = isValidLargeAAA ? 'valid' : 'fail';
        document.getElementById('largeAAA').innerText = isValidLargeAAA ? 'Pass' : 'Fail';
    }
</script>
</body>
</html>